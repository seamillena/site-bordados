<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='estilo.css') }}">
    <title>Início - O Astronauta Bordados</title>
    </head>
<body>
        <nav>
        <div class="botao-perfil">
            <div class="foto-perfil">
                {% if usuario %}
                    <a href="{{ url_for('perfiladm') }}">
                        <img src="{{ url_for('static', filename='imagens/' ~ (foto or 'user.png')) }}">
                    </a>
                {% else %}
                    <img src="{{ url_for('static', filename='imagens/user.png') }}">
                {% endif %}
            </div>
        
            {%if nome and sobrenome %}
                <a href="{{url_for('perfiladm')}}">{{nome}} {{sobrenome}}</a>
            {% else %}
                <a href="{{url_for('perfil')}}">Usuário</a>
            {% endif %}
          </div>
    
    
        <a href="/inicioadm">Início</a> |
        <a href="/catalogoadm">Catálogo</a> |
        <a href="/muraladm">Mural</a> |
        <a href="/configuracoes">Configurações</a> |
        <a href="/pedidos">Pedidos</a> |
        <a href="/logout" onclick="return confirm('Tem certeza que deseja sair?')">Logout</a>
    </nav>
    
    <header class="logo-header">
        <a href="/inicioadm">
            <img src="{{ url_for('static', filename='imagens/astronauta.png') }}" alt="Astronauta bordando">   
            <div class="texto-logo">
                <h1>O Astronauta</h1>
                <h2>BORDADOS | ADMINISTRADOR</h2>
            </div>
        </a>
    </header>

<!-- Botão Voltar ao Catálogo -->
<div class="botao-centro">
    <a href="{{ url_for('catalogoadm', tema=tema if tema and tema|lower != 'todos' else None) }}" class="botao" onclick="atualizarNotificacaoCarrinho()">Voltar ao Catálogo</a>
</div>

    {% if tema %}
    <p><strong>Filtro aplicado:</strong> {{ tema.capitalize() }}</p>
    {% endif %}


<!-- Detalhes do Bordado -->
    <div class="conteudo-bordado">
        <div class="navegacao">
            <!-- Botão Anterior -->
            <a href="{{ url_for('detalhesadm', id=prev_id, tema=tema) }}" class="botao">Anterior</a>
    
            <!-- Botão Próximo -->
            <a href="{{ url_for('detalhesadm', id=next_id, tema=tema) }}" class="botao">Próximo</a>
        </div>
        <div class="carrossel-e-detalhes">
            <div class="carrossel">
                <div class="carrossel-imagens" id="carrossel-imagens">
                    {% for imagem in bordado.imagens %}
                    <img src="{{ url_for('static', filename='imagens/' + imagem) }}" alt="Imagem do bordado" class="zoom" onclick="this.classList.toggle('zoom-ativo')">
                    {% endfor %}
                </div>
                <div class="botoes-carrossel">
                    <button onclick="mudarImagem(-1)">&#8249;</button>
                    <button onclick="mudarImagem(1)">&#8250;</button>
                </div>
            </div>
            <ul class="detalhes-bordado">
                <p><strong>Detalhes: </strong></p>
                {%for descricao in bordado.descricao.split(',') %}
                    <li>{{ descricao.strip() }}</li>
                {% endfor %}
                
            
            <div class="informacoes-bordado">   
                <p><strong>Preço:</strong> R$ {{ bordado.preco }}</p>
            </div>
           <!-- detalhes_bordado.html -->
        <form action="{{ url_for('confirmar_exclusao', bordado_id=bordado.id) }}" method="POST">
            <button type="submit" class="btn btn-danger" onclick="return confirm('Tem certeza que deseja excluir este bordado?')">Excluir Bordado</button>
        </form>
        <div class="botao-editar">
            <a href="{{ url_for('editar_bordado',id=bordado.id)}}" class="botao">Editar Bordado</a>
        </div>   
           
        </div>    
        
    </div>
    </div>
    <script>
        // Salva a posição do scroll antes de sair da página
        window.onbeforeunload = function() {
            sessionStorage.setItem('scrollPosition', window.scrollY);
        };

        // Restaura a posição do scroll quando a página é recarregada
        window.onload = function() {
            var scrollPosition = sessionStorage.getItem('scrollPosition');
            if (scrollPosition) {
                window.scrollTo(0, scrollPosition);
            }
        };
    </script>
   <script>
    let imagemIndex = 0; // Inicializa a variável para o índice da imagem.

    // Função para mudar as imagens
    function mudarImagem(direcao) {
        const imagens = document.querySelectorAll('.carrossel-imagens img');
        imagemIndex += direcao;

        if (imagemIndex < 0) {
            imagemIndex = imagens.length - 1; // Vai para a última imagem
        } else if (imagemIndex >= imagens.length) {
            imagemIndex = 0; // Volta para a primeira imagem
        }

        // Oculta todas as imagens e mostra a atual
        imagens.forEach((img, index) => {
            img.style.display = (index === imagemIndex) ? 'block' : 'none';
        });
    }

    // Inicializar a exibição da primeira imagem
    document.addEventListener('DOMContentLoaded', () => {
        const imagens = document.querySelectorAll('.carrossel-imagens img');
        if (imagens.length > 0) {
            imagens.forEach((img, index) => {
                img.style.display = (index === imagemIndex) ? 'block' : 'none';
            });
        }
    });
</script>
<footer class ="rodape">
    <p>&copy; 2025 O Astronauta Bordados.</p>
    {%for contato in contatos %}
    <p>{{ contato['numero'] }} | {{ contato['email'] }} | {{ contato['insta'] }}</p>
    {% endfor %}
</footer>
</body>
</html>
